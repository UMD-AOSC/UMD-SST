cost function:
  cost type: 3D-Var
  window begin: 2018-04-15T00:00:00Z
  window length: PT24H
  analysis variables: &vars [sea_surface_temperature]

  geometry: &geometry
    grid:
      name: S360x180
      domain:
        type: global
        west: -180
    landmask:
      filename: data_static/landmask_1x1.nc

  background:
    state variables: *vars
    date: 2018-04-15T12:00:00Z
    filename: data_static/19850101_regridded_sst_1x1.nc
    kelvin: true

  background error:
    covariance model: SABER
    saber central block:
      saber block name: BUMP_NICAS
      bump:
        load_nicas_local: true
        datadir: data_generated/staticbinit
        strategy: specific_univariate
        prefix: bump_sst
        # mask_check: 1
        # network: 1
    # variable changes:
    # - variable change: umdsstStdDev
    #   input variables: *vars
    #   output variables: *vars
    #   fixed: 1.0

  observations:
    observers:
    - obs error:
        covariance model: diagonal
      obs operator:
        name: Identity
      obs filters:
      - filter: Domain Check
        where:
        - variable: {name: sea_area_fraction@GeoVaLs}
          minvalue: 1.0
      obs space:
        name: sea_surface_temperature
        obsdatain:
          engine:
            type: H5File
            obsfile: data_static/obs_sst.nc
        obsdataout:
          engine:
            type: H5File
            obsfile: data_generated/var/var.sst.nc
        simulated variables: [sea_surface_temperature]

variational:
  minimizer:
    algorithm: DRIPCG

  iterations:
  - geometry: *geometry
    gradient norm reduction: 1.0e-10
    ninner: 10
    test: on
    diagnostics:
      departures: ombg
    online diagnostics:
      write increment: true
      increment:
        filename: data_generated/var/var.increment.nc


final:
  diagnostics:
    departures: oman


output:
  filename: data_generated/var/var.final.nc
