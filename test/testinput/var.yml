cost function:
  cost type: 3D-Var
  window begin: 2018-04-15T00:00:00Z
  window length: PT6H
  analysis variables: &vars [sea_surface_temperature]
  geometry:
    grid: S360x180
    domain:
      type: global
      west: -180
  background:
    state variables: *vars
#   date: 2018-04-15T00:00:00Z  # Ligang: this will result in "Assertion failed: xx.state().validTime() == windowHalf_ in runNL"
    date: 2018-04-15T03:00:00Z  # xx.state().validTime() == windowHalf_ == 2018-04-15T03:00:00Z
    filename: Data/19850101_regridded_sst.nc
  background error:
    covariance model: BUMP  # Ligang: must have, use saber lib.
    bump:
      verbosity: main
      datadir: Data
      method: cor
      load_nicas: 1
      prefix: Chen
      mpicom: 2
      strategy: specific_univariate
  observations:
  - obs error:
      covariance model: BUMP
    obs operator:
      name: AtmVertInterpLay  # Ligang: must have, value copied, ok?
      obs type: Stream
    obs space:
      name: sea_surface_temperature  # Ligang: must have, is the value ok?
      obsdatain: 
        obsfile: Data/obs_sst.nc
      simulated variables: [sea_surface_temperature]  # Ligang: must have
      obsdataout:
        obsfile: Data/var.obs3d_output.nc
    obs type: Stream   
 
variational:  # Ligang: must have.
  minimizer:  # Ligang: must have.
    algorithm: DRIPCG
  iterations:
  - diagnostics:
      departures: ombg
    gradient norm reduction: 1.0e-10
    ninner: 10
    geometry:  # Ligang: must have, values ok?
      grid: S360x180
      domain:
        type: global
        west: -180
#   geometry:
#     nx: 20
#     ny: 10
#     depths: [4500.0, 5500.0]
    test: on
    online diagnostics:
      write increment: true
    increment:
      datadir: Data
      date: 2018-04-15T00:00:00Z
#     date: 2018-04-15T03:00:00Z
      exp: 3dvar.iter1
      type: in
# - diagnostics:
#     departures: ombg
#   gradient norm reduction: 1.0e-10
#   ninner: 10
#   geometry:
#     nx: 40
#     ny: 20
#     depths: [4500.0, 5500.0]
#   test: on
#   online diagnostics:
#     write increment: true
#   increment:
#     datadir: Data
#     date: 2010-01-01T12:00:00Z
#     exp: 3dvar.iter2
#     type: in
#     analysis variables: [x]

final:  # Ligang: must have.
  diagnostics:
    departures: oman

output:  # Ligang: must have.
  datadir: Data
  exp: 3dvar
  frequency: PT6H
  type: an 
